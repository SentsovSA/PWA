# üõ°Ô∏è CORS –û–±—Ö–æ–¥ - Evctrade Mobile App

## –ß—Ç–æ —Ç–∞–∫–æ–µ CORS –æ–±—Ö–æ–¥?

CORS (Cross-Origin Resource Sharing) - —ç—Ç–æ –ø–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏. –ù–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –æ–±—Ö–æ–¥–∞ —ç—Ç–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.

## üîß –ú–µ—Ç–æ–¥—ã –æ–±—Ö–æ–¥–∞ CORS

### 1. **User-Agent Override**
```kotlin
// Android
.addHeader("User-Agent", "Mozilla/5.0 (Linux; Android 10; Mobile) AppleWebKit/537.36")

// iOS  
request.setValue("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X) AppleWebKit/605.1.15", forHTTPHeaderField = "User-Agent")
```

### 2. **–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä**
- –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 3. **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
```kotlin
"Access-Control-Allow-Origin" to "*"
"Access-Control-Allow-Methods" to "GET, POST, PUT, DELETE, OPTIONS"
"Access-Control-Allow-Headers" to "Content-Type, Authorization"
```

## üì± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### Android
1. **OkHttp —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏**
2. **Interceptor –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤**
3. **Fallback –∫ —ç–º—É–ª—è—Ü–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö**

### iOS
1. **NSURLConnection —Å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏**
2. **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π User-Agent –¥–ª—è iOS**
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback**

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±—Ö–æ–¥
```kotlin
val corsProxy = CORSProxy()
val response = corsProxy.fetch("https://evctrade.online")
if (response.success) {
    // –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ CORS –æ–±—Ö–æ–¥
}
```

### –†—É—á–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ
- –ü—Ä–∏ –æ—à–∏–±–∫–µ `ERR_BLOCKED_BY_ORB` –Ω–∞–∂–º–∏—Ç–µ "üõ°Ô∏è –û–±–æ–π—Ç–∏ CORS"
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ –ø—Ä–æ–∫—Å–∏-—Ä–µ–∂–∏–º

## üîç –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

- **üõ°Ô∏è** –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ - CORS –æ–±—Ö–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω
- **–ó–µ–ª–µ–Ω–∞—è –ø–æ–ª–æ—Å–∞** - —Å—Ç–∞—Ç—É—Å –æ–±—Ö–æ–¥–∞
- **–ö–Ω–æ–ø–∫–∞ "–û–±–æ–π—Ç–∏ CORS"** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ù–µ –≤—Å–µ —Å–∞–π—Ç—ã** –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏
2. **HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ API** –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
```kotlin
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
val headers = mapOf(
    "Custom-Header" to "value",
    "Authorization" to "Bearer token"
)
val response = corsProxy.fetch(url, headers)
```

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ evctrade.online
- –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç:
- –£—Å–ø–µ—à–Ω—ã–µ –æ–±—Ö–æ–¥—ã CORS
- –û—à–∏–±–∫–∏ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ HTTPS
- User-Agent –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ü—Ä–æ–∫—Å–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è CORS

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–û–±—Ö–æ–¥ ERR_BLOCKED_BY_ORB**  
‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**  
‚úÖ **–†–∞–±–æ—Ç–∞ —Å –ª—é–±—ã–º–∏ —Å–∞–π—Ç–∞–º–∏**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**  

–¢–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º–∏ —Å–∞–π—Ç–∞–º–∏, –¥–∞–∂–µ —Å —Å—Ç—Ä–æ–≥–∏–º–∏ CORS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏! üöÄ
